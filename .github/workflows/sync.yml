name: Upstream Sync

permissions:
  contents: write

on:
  schedule:
    - cron: "0 * * * *" # 每小时自动同步一次
  workflow_dispatch:    # 允许你在 Actions 页面手动点击按钮立即同步

jobs:
  sync_latest_from_upstream:
    name: Sync latest commits from upstream repo
    runs-on: ubuntu-latest

    steps:
      # 第一步：检出你的代码
      - name: Checkout target repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # 第二步：同步上游分支
      - name: Sync upstream changes
        id: sync
        uses: aieri/sync-upstream-repo@v2.0
        with:
          upstream_repo: https://github.com/su-kaka/gcli2api.git
          upstream_branch: main
          target_branch: main
          force: true # 强制同步，确保你的仓库与原作者完全一致，Zeabur 也会随之更新
